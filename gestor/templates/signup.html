{% extends 'base-public.html' %}  <!-- TEMPLATE INHERITANCE  -->
{% load crispy_forms_tags %}

{% block content %}
<div class="container" style="width: 400px; margin-top: 60px">
    <h1 class="text-center fw-bold">Registrarse</h1>
    <!--SHOW ERROR-->
    {% if error %}
        <div id="error-message" class="alert alert-dismissible alert-danger">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            <strong>{{error}}</strong>
        </div>
    {% endif %}
    
    <form  method="POST">
        {% csrf_token %}
        <div class="mb-2">
            <label for="username" class="form-label">Username</label>
            <input type="text" name="username" class="form-control" id="username" placeholder="Username:" value="{{username}}" required>
        </div>
        <div class="mb-2">
            <label for="password1" class="form-label">Password</label>
            <input type="password" name="password1" class="form-control" id="password1" placeholder="Password:" value="{{password1}}" required>
        </div>
        <div class="mb-2">
            <label for="password2" class="form-label">Confirm Password</label>
            <input type="password" name="password2" class="form-control" id="password2" placeholder="Confirm Password:" value="{{password2}}" required>
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-primary">Registrar</button>
        </div>
    </form>
    <a href="/login">Login</a>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const errorMessage = document.getElementById("error-message");
        if (errorMessage) {
            // Hide the error message after 3 seconds
            setTimeout(() => {
                errorMessage.classList.add("fade-out");
                // Remove the element after the transition is complete
                errorMessage.addEventListener("transitionend", () => {
                    errorMessage.style.display = "none";
                }, { once: true });
            }, 3000);

            // Add event listener to the close button
            errorMessage.querySelector(".btn-close").addEventListener("click", () => {
                errorMessage.classList.add("fade-out");
                // Remove the element after the transition is complete
                errorMessage.addEventListener("transitionend", () => {
                    errorMessage.style.display = "none";
                }, { once: true });
            });
        }
    });
</script>
{% endblock %}
