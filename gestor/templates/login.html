{% extends 'base-public.html' %}  <!-- TEMPLATE INHERITANCE  -->
{% load crispy_forms_tags %}

{% block content %}
<div class="container" style="width: 400px; margin-top: 100px">
    <h1 class="text-center fw-bold">Inicia Sesión</h1>
    <!--SHOW ERROR-->
    {% if error %}
    <div id="error-message" class="alert alert-dismissible alert-danger">
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        <strong>{{error}}</strong>
    </div>
    {% endif %}
    <form action="" method="POST">
        {% csrf_token %}
        {{form|crispy}}
        <div class="d-flex justify-content-center">
            <button class="btn btn-primary">Iniciar Sesion</button>
        </div>
          
    </form>
    <a href="/" class="text-center">¿Olvidaste tu password?</a>
    <hr class="w-100">
    <div class="d-flex justify-content-center mt-4">
        <a href="/" class="text-end"><button class="btn btn-success">Crear cuenta nueva</button></a>
    </div>
    
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const errorMessage = document.getElementById("error-message");
        if (errorMessage) {
            // Hide the error message after 3 seconds
            setTimeout(() => {
                errorMessage.classList.add("fade-out");
                // Remove the element after the transition is complete
                errorMessage.addEventListener("transitionend", () => {
                    errorMessage.style.display = "none";
                }, { once: true });
            }, 3000);

            // Add event listener to the close button
            errorMessage.querySelector(".btn-close").addEventListener("click", () => {
                errorMessage.classList.add("fade-out");
                // Remove the element after the transition is complete
                errorMessage.addEventListener("transitionend", () => {
                    errorMessage.style.display = "none";
                }, { once: true });
            });
        }
    });
</script>
{% endblock %}